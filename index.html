<script>
  const demoDB = {
    "123ABC": { message: "العربة موجودة - اتصل بنا لاستلام الموقع.", image: null },
    "456DEF": { message: "تم تسليم هذه العربة لصاحبها.", image: null }
  };

  let isAdmin = false;

  function searchCar() {
    const input = document.getElementById("searchInput").value.trim();
    const result = document.getElementById("result");
    const contact = document.getElementById("contactInfo");
    const carImage = document.getElementById("carImage");
    carImage.innerHTML = "";

    if (!input) {
      result.textContent = "الرجاء إدخال رقم صحيح.";
      result.style.color = "#dc2626";
      contact.textContent = "";
      return;
    }

    if (demoDB[input]) {
      result.textContent = demoDB[input].message;
      result.style.color = "#16a34a";
      contact.textContent = "📞 للتواصل فقط إذا كانت هذه عربتك: 0129271559";
      if (demoDB[input].image) {
        const img = document.createElement("img");
        img.src = demoDB[input].image;
        img.alt = "صورة السيارة";
        img.className = "uploaded-img";
        carImage.appendChild(img);
      }
    } else {
      result.textContent = "لا توجد نتائج لهذا الرقم حالياً.";
      result.style.color = "#dc2626";
      contact.textContent = "";
    }
  }

  function loginAdmin() {
    const pass = document.getElementById("adminPass").value;
    const adminPanel = document.getElementById("adminPanel");
    if (pass === "1234") {  // ←←←← كلمة المرور الجديدة
      adminPanel.style.display = "block";
      isAdmin = true;
      alert("✅ تم الدخول كمسؤول.");
    } else {
      alert("❌ كلمة المرور غير صحيحة.");
    }
  }

  function addNewEntry() {
    if (!isAdmin) {
      alert("يجب الدخول كمسؤول أولاً.");
      return;
    }

    const key = document.getElementById("newKey").value.trim();
    const message = document.getElementById("newMessage").value.trim();
    const fileInput = document.getElementById("newImage");
    const file = fileInput.files[0];

    if (!key || !message) {
      alert("الرجاء ملء جميع الحقول.");
      return;
    }

    if (file) {
      const reader = new FileReader();
      reader.onload = function (e) {
        demoDB[key] = { message: message, image: e.target.result };
        alert("تمت إضافة الرقم والصورة بنجاح!");
      };
      reader.readAsDataURL(file);
    } else {
      demoDB[key] = { message: message, image: null };
      alert("تمت إضافة الرقم بدون صورة.");
    }

    document.getElementById("newKey").value = "";
    document.getElementById("newMessage").value = "";
    fileInput.value = "";
  }
</script>
